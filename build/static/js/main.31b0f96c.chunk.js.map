{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","query","handleQuery","value","onChange","PersonForm","handleNameChange","handleNumberChange","handleSubmitForm","newName","newNumber","onSubmit","type","Persons","result","removePerson","map","person","key","name","number","onClick","id","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","isError","console","log","className","style","color","App","useState","persons","setPersons","setNewName","setNewNumber","setQuery","errorMessage","setErrorMessage","setIsError","useEffect","personService","length","filter","toLowerCase","includes","event","target","preventDefault","existingName","alert","window","confirm","changedPerson","setTimeout","concat","catch","error","res","err","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.31b0f96c.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({query, handleQuery}) => {\n    return (\n        <div>\n            Filter name <input value={query} onChange={handleQuery} />\n        </div>\n    );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({handleNameChange, handleNumberChange, handleSubmitForm, newName, newNumber}) => {\n    return (\n        <form onSubmit={handleSubmitForm}>\n            <div>\n                name: <input value={newName} onChange={handleNameChange} />\n            </div>\n            <div>\n                number: <input value={newNumber} onChange={handleNumberChange} />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({result, removePerson}) => {\n    return (\n        <>\n            {result.map((person) => (\n                <div key={person.name}>\n                    <p>\n                        {person.name} / {person.number}\n                    </p>\n                    <button type=\"button\" onClick={() => removePerson(person.id, person.name)}>\n                        Delete\n                    </button>\n                </div>\n            ))}\n        </>\n    );\n};\n\nexport default Persons;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n    const request = axios.get(baseUrl);\n    return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject);\n    return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\n    return request.then((response) => response.data);\n};\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`);\n    return request.then((response) => response);\n};\nexport default {\n    getAll,\n    create,\n    update,\n    remove,\n};\n","import React from \"react\";\n\nconst Notification = ({message, isError}) => {\n    console.log(isError);\n\n    if (message === null) {\n        return null;\n    }\n    return (\n        <div className=\"error\" style={{color: isError ? \"red\" : \"green\"}}>\n            {message}\n        </div>\n    );\n};\n\nexport default Notification;\n","import React, {useState, useEffect} from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\nimport \"./App.css\";\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState(\"\");\n    const [newNumber, setNewNumber] = useState(\"\");\n    const [query, setQuery] = useState(\"\");\n    const [errorMessage, setErrorMessage] = useState(null);\n    const [isError, setIsError] = useState(false);\n    useEffect(() => {\n        console.log(\"effect\");\n        personService.getAll().then((response) => {\n            console.log(\"promise fulfilled\", response);\n            setPersons(response);\n        });\n    }, []);\n    console.log(\"render\", persons.length, \"persons\");\n\n    const handleQuery = (event) => {\n        setQuery(event.target.value);\n    };\n\n    const handleNameChange = (event) => {\n        setNewName(event.target.value);\n    };\n\n    const handleNumberChange = (event) => {\n        setNewNumber(event.target.value);\n    };\n    const removePerson = (id, name) => {\n        console.log(\"removed\", id);\n        if (window.confirm(`Do you really want to delete ${name} with an ID of ${id}`)) {\n            personService\n                .remove(id)\n                .then((res) => {\n                    personService.getAll().then((response) => {\n                        console.log(\"promise fulfilled\", response);\n                        setPersons(response);\n                        setIsError(false);\n                        setErrorMessage(`Information of ${name} has been removed from the server`);\n                        setTimeout(() => {\n                            setErrorMessage(null);\n                        }, 5000);\n                    });\n                })\n                .catch((err) => {\n                    setIsError(true);\n                    setErrorMessage(`Information of ${name} has already been removed from the server`);\n                    setTimeout(() => {\n                        setErrorMessage(null);\n                    }, 5000);\n                });\n        }\n    };\n    const handleSubmitForm = (event) => {\n        event.preventDefault();\n        const existingName = persons.filter((person) => person.name === newName);\n        if (existingName.length > 0) {\n            alert(`${newName} is already added.`);\n            const {number, id} = existingName[0];\n            if (number !== newNumber) {\n                if (window.confirm(\"Replace existing number with new number?\")) {\n                    const changedPerson = {...existingName[0], number: newNumber};\n                    personService.update(id, changedPerson).then((response) => {\n                        setPersons(persons.map((person) => (person.id !== id ? person : response)));\n                        setIsError(false);\n                        setErrorMessage(`Person '${response.name}' number was changed to ${response.number}`);\n                        setTimeout(() => {\n                            setErrorMessage(null);\n                        }, 5000);\n                    });\n                }\n            }\n        } else {\n            const newPerson = {\n                name: newName,\n                number: newNumber,\n            };\n            personService\n                .create(newPerson)\n                .then((response) => {\n                    setPersons(persons.concat(response));\n                    setNewName(\"\");\n                    setNewNumber(\"\");\n                    setIsError(false);\n                    setErrorMessage(`Person '${response.name}' was added`);\n                    setTimeout(() => {\n                        setErrorMessage(null);\n                    }, 5000);\n                })\n                .catch((error) => {\n                    setNewName(\"\");\n                    setNewNumber(\"\");\n                    setIsError(true);\n                    setErrorMessage(error.response.data.error);\n                    setTimeout(() => {\n                        setErrorMessage(null);\n                    }, 5000);\n                });\n        }\n    };\n\n    const result = query\n        ? persons.filter((person) => person.name.toLowerCase().includes(query.toLowerCase()))\n        : persons;\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification message={errorMessage} isError={isError}></Notification>\n            <Filter query={query} handleQuery={handleQuery}></Filter>\n            <PersonForm {...{handleNameChange, handleNumberChange, handleSubmitForm, newName, newNumber}}></PersonForm>\n            <h2>Numbers</h2>\n            <Persons result={result} removePerson={removePerson}></Persons>\n        </div>\n    );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}